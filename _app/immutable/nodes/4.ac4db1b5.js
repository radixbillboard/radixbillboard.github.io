import{s as L,e as q,i as I,d as p,J as N,Z as P,f as y,a as D,g as x,h as B,c as G,_ as Q,j as C,w as $,k as g,l as Y,m as tt}from"../chunks/scheduler.8de5dfe6.js";import{S as et,i as st,a as k,t as v,c as z,g as K,b as V,d as A,m as F,e as O}from"../chunks/index.2f036f68.js";import{e as U,l as nt,S as it,B as at,b as j,m as rt,k as H,P as J,o as ot}from"../chunks/SendTransactionButton.5f852f17.js";import{m as lt}from"../chunks/manifestCreatorManager.07baeb8d.js";function R(r,e,t){const s=r.slice();return s[12]=e[t],s}function W(r){let e,t,s,n,i=[],l=new Map,h,m,u=U(r[1]);const w=a=>a[12];for(let a=0;a<u.length;a+=1){let c=R(r,u,a),d=w(c);l.set(d,i[a]=X(d,c))}let o=r[3]&&Z(r);return{c(){e=y("div"),t=y("radix-connect-button"),s=D(),n=y("div");for(let a=0;a<i.length;a+=1)i[a].c();h=D(),o&&o.c(),this.h()},l(a){e=x(a,"DIV",{class:!0});var c=B(e);t=x(c,"RADIX-CONNECT-BUTTON",{class:!0}),B(t).forEach(p),s=G(c),n=x(c,"DIV",{class:!0});var d=B(n);for(let _=0;_<i.length;_+=1)i[_].l(d);d.forEach(p),h=G(c),o&&o.l(c),c.forEach(p),this.h()},h(){Q(t,"class","mx-auto"),C(n,"class","grid-container svelte-1r6ytim"),C(e,"class","flex flex-col gap-8 p-8")},m(a,c){I(a,e,c),$(e,t),$(e,s),$(e,n);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(n,null);$(e,h),o&&o.m(e,null),m=!0},p(a,c){c&2&&(u=U(a[1]),i=nt(i,c,w,1,a,u,l,n,ot,X,null,R)),a[3]?o?(o.p(a,c),c&8&&k(o,1)):(o=Z(a),o.c(),k(o,1),o.m(e,null)):o&&(K(),v(o,1,1,()=>{o=null}),z())},i(a){m||(k(o),m=!0)},o(a){v(o),m=!1},d(a){a&&p(e);for(let c=0;c<i.length;c+=1)i[c].d();o&&o.d()}}}function X(r,e){let t;return{key:r,first:null,c(){t=y("div"),this.h()},l(s){t=x(s,"DIV",{class:!0,style:!0});var n=B(t);n.forEach(p),this.h()},h(){C(t,"class","block svelte-1r6ytim"),g(t,"left",e[12].x+"px"),g(t,"top",e[12].y+"px"),g(t,"width",e[12].width+"px"),g(t,"height",e[12].height+"px"),this.first=t},m(s,n){I(s,t,n)},p(s,n){e=s,n&2&&g(t,"left",e[12].x+"px"),n&2&&g(t,"top",e[12].y+"px"),n&2&&g(t,"width",e[12].width+"px"),n&2&&g(t,"height",e[12].height+"px")},d(s){s&&p(t)}}}function Z(r){let e,t,s,n,i;return t=new it({props:{text:"Break up block",buildManifestFn:r[8]}}),t.$on("transactionSucceeded",r[9]),n=new at({props:{variant:"unelevated",$$slots:{default:[ct]},$$scope:{ctx:r}}}),n.$on("click",r[10]),{c(){e=y("div"),V(t.$$.fragment),s=D(),V(n.$$.fragment),this.h()},l(l){e=x(l,"DIV",{class:!0});var h=B(e);A(t.$$.fragment,h),s=G(h),A(n.$$.fragment,h),h.forEach(p),this.h()},h(){C(e,"class","flex gap-2")},m(l,h){I(l,e,h),F(t,e,null),$(e,s),F(n,e,null),i=!0},p(l,h){const m={};h&32768&&(m.$$scope={dirty:h,ctx:l}),n.$set(m)},i(l){i||(k(t.$$.fragment,l),k(n.$$.fragment,l),i=!0)},o(l){v(t.$$.fragment,l),v(n.$$.fragment,l),i=!1},d(l){l&&p(e),O(t),O(n)}}}function ct(r){let e;return{c(){e=Y("Generate")},l(t){e=tt(t,"Generate")},m(t,s){I(t,e,s)},d(t){t&&p(e)}}}function ht(r){let e,t,s=r[2]&&W(r);return{c(){s&&s.c(),e=q()},l(n){s&&s.l(n),e=q()},m(n,i){s&&s.m(n,i),I(n,e,i),t=!0},p(n,[i]){n[2]?s?(s.p(n,i),i&4&&k(s,1)):(s=W(n),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(K(),v(s,1,1,()=>{s=null}),z())},i(n){t||(k(s),t=!0)},o(n){v(s),t=!1},d(n){n&&p(e),s&&s.d(n)}}}function ut(r,e){const t=[r],s=[];for(;s.length+t.length<e;){t.sort((l,h)=>h.area-l.area);const n=t.shift();if(!n)throw new Error("Unexpected state: queue is empty before reaching target count.");const i=n.split();i.length>0?t.push(...i):s.push(n)}return[...s,...t].slice(0,e)}function ft(r,e,t){let s,n,i;const{manifestCreator:l}=lt;N(r,l,_=>t(3,i=_));const{currentBillboardComponent:h}=j;N(r,h,_=>t(2,n=_));const{accountBalances:m}=rt;P(m);class u{constructor(b,M,f,E){this.x=b,this.y=M,this.width=f,this.height=E}get area(){return this.width*this.height}get blockId(){return H(new J(this.x/10,this.y/10,n.constants.gridConfig).toGridIndex(),new J(this.x/10+this.width/10-1,this.y/10+this.height/10-1,n.constants.gridConfig).toGridIndex())}split(){if(this.width<=10||this.height<=10)return[];const b=(f=0,E=1)=>{let S=0,T=0;for(;S===0;)S=Math.random();for(;T===0;)T=Math.random();return f+E*Math.sqrt(-2*Math.log(S))*Math.cos(2*Math.PI*T)},M=f=>Math.round(f/10)*10;if(this.height>.7*this.width){const f=M(this.height/2+b(0,this.height/8));return[new u(this.x,this.y,this.width,f),new u(this.x,this.y+f,this.width,this.height-f)]}else{const f=M(this.width/2+b(0,this.width/8));return[new u(this.x,this.y,f,this.height),new u(this.x+f,this.y,this.width-f,this.height)]}}}let w=new u(0,0,1250,800);function o(){const _=s.map(b=>b.blockId);return P(l).breakupBlock(H(0,9999),_)}const a=()=>({manifest:o(),message:"Block broken up"}),c=async()=>j.refreshComponent(),d=()=>t(0,w=new u(0,0,1250,800));return r.$$.update=()=>{r.$$.dirty&1&&t(1,s=ut(w,130))},[w,s,n,i,l,h,u,o,a,c,d]}class gt extends et{constructor(e){super(),st(this,e,ft,ht,L,{})}}export{gt as component};
